<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title><strong>Venta</strong></ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="closeModal()">
        <ion-icon slot="icon-only" name="close" color="dark"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  
  <ion-grid>
    <ion-row class="ion-justify-content-between">
          <ion-col class="mat-elevation-z8" size="6" *ngIf="venta">
            <ion-item>
              <ion-label> <strong>Cliente:</strong> 
              </ion-label>
            </ion-item>
            <ion-item lines="none" class="none">
              <ion-label>
                <p> <strong>Nombre:</strong> {{venta.cliente.nombre}}</p>
                <p> <strong>Ruc/CI:</strong> {{venta.cliente.ruc}}</p>
                <p> <strong>Teléfono:</strong> {{venta.cliente.telefono}}</p>     
                <p> <strong>Dirección:</strong> {{venta.cliente.direccion}}</p>
                <p> <strong>Correo:</strong> {{venta.cliente.email}}</p>
              </ion-label>
            </ion-item>
       
        </ion-col>
        <ion-col class="mat-elevation-z8" size="5" *ngIf="venta">
          <ion-item>
            <ion-label> <strong>Venta:</strong></ion-label>
          </ion-item>
          <ion-item lines="none" class="none">
            <ion-label class="ion-text-wrap">
              <p> <strong>Fecha:</strong> {{venta.fecha | date:'medium'}}</p>
              <p> <strong>Número:</strong> {{venta.numero}}</p>
            </ion-label>
          </ion-item>
          <div class="content-total">
            <h3 class="total">${{venta.total.toFixed(2)}}</h3>
          </div>
     
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12" class="mat-elevation-z8 mt-4" >
        <ion-item>
          <ion-label> <strong>Productos:</strong> 
          </ion-label>
        </ion-item>
        <div style="overflow-y: auto; height: 300px;">
            <ion-grid *ngIf="venta">
              <ion-row class="ion-justify-content-between">
                <ion-col  *ngFor="let encabezado of encabezados" class="text-center">
                    <p> <strong>{{encabezado}}</strong>  </p>
                </ion-col>
              </ion-row>
              <ion-row class="ion-justify-content-between"
              *ngFor="let producto of venta.productos, let i = index">
                  <ion-col class="text-center ">
                     <p> <strong>{{producto.producto.codigo}}</strong>  </p>
                  </ion-col>
                  <ion-col  class="text-center">
                    <p> <strong>{{producto.producto.nombre}}</strong>  </p>
                  </ion-col>
                  <ion-col  class="text-center">
                    <p> <strong>{{producto.cantidad}}</strong>  </p>
                    </ion-col>
                  <ion-col  class="text-center">
                    <p> <strong>${{producto.producto.pvp}}</strong>  </p>
                  </ion-col>
                  <ion-col class="text-center">
                    <p> <strong>${{(producto.producto.pvp * 0.12).toFixed(2)}}</strong>  </p>
                  </ion-col>
                  <ion-col class="text-center">
                    <p> <strong>${{(producto.precio).toFixed(2)}}</strong>  </p>
                  </ion-col>
              </ion-row>

            </ion-grid>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>

</ion-content>

<ion-footer>
  <div class="mat-elevation-z8 m-2">
      <ion-grid >
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label> <strong>Valores:</strong> 
              </ion-label>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="venta" class="ion-align-items-center ion-justify-content-end">
          <ion-col>
            <ion-item class="none text-right" lines="none" detail="false">
                <ion-label class="normal">
                    <p class="m-0"> <strong>Subtotal sin IVA:</strong> ${{venta.subtotal_sin_iva.toFixed(2)}}</p>
                    <p class="m-0"> <strong>Subtotal con IVA:</strong> ${{venta.subtotal_con_iva.toFixed(2)}}</p>
                    <p class="m-0"> <strong>IVA:</strong> ${{venta.iva.toFixed(2)}}</p>
                    <p class="m-0"> <strong>Total:</strong> ${{venta.total.toFixed(2)}}</p>
                </ion-label>
            </ion-item>
          </ion-col>
        </ion-row>
      </ion-grid>
  </div>
</ion-footer>



